/*

Автор: Шумилко Н.Д. (4 вариант) (https://github.com/VetrovSV/OOP/blob/master/C/tasks.md)          <- ссылка на табличку с заданиями
                                  (https://bgu-chita.ru/zadachnik/Glava01/index01.htm#z189)        <- ссылка на задание (найти самому)

Задача 189:
Даны натуральное число n, действительные числа a1 ,...,an. В последовательности a1 ,...,an все неотрицательные члены, не принадлежащие отрезку [1,2], заменить на единицу. Кроме того, получить число отрицательных членов и число членов, принадлежащих отрезку [1,2].

*/
#include <stdio.h>   // Библиотека для работы с вводом-выводом (printf, scanf)
#include <stdlib.h>  // Стандартная библиотека C: malloc, rand, free и др.
#include <windows.h> // Для настройки кодировки консоли (Windows-specific)

int main() {
    // Установка кодировки вывода консоли на UTF-8 для корректного отображения русского языка
    SetConsoleOutputCP(CP_UTF8);

    int n; // Переменная для хранения размера массива

    // Запрашиваем у пользователя размер массива
    printf("Введите размер массива: ");
    scanf("%d", &n);

    // Выделяем память под массив типа float длиной n
    float* array = (float*)malloc(n * sizeof(float));


    // Заполняем массив случайными числами от -5.0 до 4.9 и выводим его
    printf("Исходный массив:\n");
    for (int i = 0; i < n; i++) {
        array[i] = (rand() % 100 - 50) / 10.0f; // Генерация числа от -5.0 до 4.9
        printf("%.2f ", array[i]);             // Выводим элемент с двумя знаками после запятой
    }
    printf("\n");

    int minus_n = 0;      // Счётчик отрицательных элементов
    int onetwo_n = 0;     // Счётчик элементов из диапазона [1, 2]

    // Подсчитываем количество отрицательных и элементов из [1, 2]
    for (int i = 0; i < n; i++) {
        if (array[i] < 0) {
            minus_n++; // Если число отрицательное
        } else if (array[i] >= 1 && array[i] <= 2) {
            onetwo_n++; // Если число лежит в диапазоне [1, 2]
        }
    }

    // Проходим по массиву и заменяем все неотрицательные элементы,
    // которые НЕ находятся в диапазоне [1, 2], на значение 1.0
    for (int i = 0; i < n; i++) {
        if (array[i] >= 0 && (array[i] < 1 || array[i] > 2)) {
            array[i] = 1.0f;
        }
    }

    // Выводим изменённый массив
    printf("Изменённый массив:\n");
    for (int i = 0; i < n; i++) {
        printf("%.2f ", array[i]);
    }
    printf("\n");

    // Выводим результаты подсчётов
    printf("Число отрицательных элементов: %d\n", minus_n);
    printf("Число элементов из отрезка [1, 2]: %d\n", onetwo_n);

    // Освобождаем выделенную память
    free(array);

    return 0;
}